{
    # Enable FrankenPHP
    frankenphp
}

# Development
:80 {
    # Set root directory
    root * /app/public
    
    # Enable compression (optional)
    encode zstd br gzip
    
    # Execute PHP files and serve assets
    php_server
    
    # Security headers
    header {
        # Remove server info
        -Server
        
        # Security headers
        X-Content-Type-Options nosniff
        X-Frame-Options DENY
        X-XSS-Protection "1; mode=block"
        Referrer-Policy strict-origin-when-cross-origin
    }
    
    # Cache headers for static assets
    @static path_regexp \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$
    header @static Cache-Control "public, max-age=31536000, immutable"
    
    # Logging
    log {
        output stdout
        level INFO
    }
}


# Production HTTPS (uncomment for production)
# your-domain.com {
#     root * /app/public
#     php_server
#     file_server
#     try_files {path} {path}/ /index.php?{query}
#     
#     header {
#         -Server
#         X-Content-Type-Options nosniff
#         X-Frame-Options DENY
#         X-XSS-Protection "1; mode=block"
#         Referrer-Policy strict-origin-when-cross-origin
#         Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
#         
#         @static {
#             path *.css *.js *.png *.jpg *.jpeg *.gif *.ico *.svg *.woff *.woff2 *.ttf *.eot
#         }
#         @static Cache-Control "public, max-age=31536000, immutable"
#     }
#     
#     encode gzip zstd
# }